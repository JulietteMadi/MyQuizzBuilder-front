import{T}from"./TopicItem-2e2fceb9.js";import{_,m as b,r as d,o as a,c as n,a as e,b as p,t as f,d as v,f as l,w as g,h as y,v as x,F as r,e as D,u as k}from"./index-47eacef6.js";const w={data(){return{allTopics:[{id:1,name:"Recrutement"},{id:2,name:"Onboarding"},{id:3,name:"Sensibilisation"},{id:4,name:"RSE en grand groupe"},{id:5,name:"Jeunes entrepreneurs"},{id:6,name:"Parité en entreprise"},{id:7,name:"Formations internes"},{id:8,name:"Rédaction de fiche emploi"},{id:9,name:"Sélectionner les CV"}],searchTopic:"",topicToDelete:{}}},components:{TopicItem:T},computed:{...b(k,["token"]),filteredTopics(){const s=this.searchTopic.toLowerCase();return s?this.allTopics.filter(t=>t.name.toLowerCase().includes(s)):this.allTopics.reverse()}},mounted(){},methods:{askDeleteTopic(s){this.topicToDelete=this.allTopics.find(t=>t.id===s)},updateTopic(s,t){this.$router.push({name:"modifierTheme",params:{id:s,name:t}})},async getAllTopics(){const s={Authorization:`Bearer ${this.token}`},t=await this.$http.get("/topics",{headers:s});t.status==200||t.status==204?this.allTopics=t.body:console.error(t)},async deleteTopic(s){{const t=this.allTopics.findIndex(c=>c.id===s);this.allTopics.splice(t,1),this.$toast.success("toast-app",`Le thème ${this.topicToDelete.name} a bien été supprimé`)}}}},C={class:"modal fade",id:"warningModalTopic",tabindex:"-1"},L={class:"modal-dialog"},S={class:"modal-content"},R=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5 text-danger",id:"labelModal"},"Êtes-vous sûr.e de vouloir supprimer ce thème ?"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),V={class:"modal-body"},$={key:0},B={class:"modal-footer"},I=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Annuler",-1),N={class:"row my-5 mx-auto"},U=e("div",{class:"col-md mx-auto"},[e("h1",null,"Liste de mes thèmes")],-1),A={class:"col-md mx-auto"},F=e("button",{class:"btn secundary-button float-md-end btn-lg",type:"button"},[e("i",{class:"bi bi-plus-circle"}),p(" Créer un thème ")],-1),M={class:"col-12 p-2 mt-5 input-group"},z=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})],-1),E={class:"row my-5 mx-auto text-center"},J={class:"col-12 col-sm-6 col-md-4 col-lg-3 py-3"};function O(s,t,c,P,j,o){const m=d("RouterLink"),u=d("TopicItem");return a(),n(r,null,[e("div",C,[e("div",L,[e("div",S,[R,e("div",V,[p(" Cette action est irréversible, et vous perdrez toute le thème : "),s.topicToDelete?(a(),n("b",$,f(s.topicToDelete.name),1)):v("",!0)]),e("div",B,[I,e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=i=>o.deleteTopic(s.topicToDelete.id))},"Supprimer")])])])]),e("div",N,[U,e("div",A,[l(m,{to:"/creer-theme"},{default:g(()=>[F]),_:1})]),e("div",M,[z,y(e("input",{type:"text",class:"form-control",id:"searchTopic",placeholder:"Rechercher un thème","onUpdate:modelValue":t[1]||(t[1]=i=>s.searchTopic=i)},null,512),[[x,s.searchTopic]])])]),e("div",E,[(a(!0),n(r,null,D(o.filteredTopics,(i,h)=>(a(),n("div",J,[l(u,{topic:i,index:h.toString(),onDeleteTopic:o.askDeleteTopic,onUpdateTopic:o.updateTopic},null,8,["topic","index","onDeleteTopic","onUpdateTopic"])]))),256))])],64)}const H=_(w,[["render",O]]);export{H as default};
