import{_ as v,o as a,c as d,a as e,t as c,h,v as w,n as _,K as y,F as m,r as I,b as r,d as f,p,e as x,f as g,m as z,i as k,u as Q}from"./index-47eacef6.js";const A={props:{answer:{type:Object,default:{}},questionIndex:{type:Number},answerIndex:{type:Number},answersLength:{type:Number}},computed:{deleteDisabled(){return this.answersLength<=2},tooltipMessage(){return this.answer.valid?"Passer la réponse en non-valide":"Passer la réponse en valide"}},methods:{enableTooltip(n,s){if(!s){const t=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(t).enable()}},disableTooltip(n){const s=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(s).dispose()}}},D=["for"],C={class:"row mb-2"},T={class:"input-group"},N=["name","id"],M=["for"],V=["id","data-bs-original-title"],B=["id"],L=["id"];function S(n,s,t,q,l,i){return a(),d(m,null,[e("label",{for:`answer${n.index}`}," Réponse "+c(t.answerIndex+1),9,D),e("div",C,[e("div",T,[h(e("input",{name:`answer${t.questionIndex}-${t.answerIndex}`,id:`answer${t.questionIndex}-${t.answerIndex}`,type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=u=>t.answer.name=u)},null,8,N),[[w,t.answer.name]]),e("div",{class:_(["input-group-text",{"bg-success":t.answer.valid}])},[e("label",{for:`checkAnswer${t.questionIndex}-${t.answerIndex}`},[e("i",{id:"checkAnswerIcon"+t.questionIndex+t.answerIndex,onMouseover:s[1]||(s[1]=u=>i.enableTooltip("checkAnswerIcon"+t.questionIndex+t.answerIndex)),class:_(["bi bi-check-lg clickable-icon",{"text-white":t.answer.valid}]),"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":i.tooltipMessage},null,42,V)],8,M)],2),e("div",{class:_(["input-group-text",{"bg-danger":!i.deleteDisabled}])},[e("i",{id:"deleteAnswer"+t.questionIndex+t.answerIndex,onClick:s[2]||(s[2]=u=>(n.$emit("deleteAnswer",t.questionIndex),i.disableTooltip(`deleteAnswer${t.questionIndex}${t.answerIndex}`))),onMouseover:s[3]||(s[3]=u=>i.enableTooltip(`deleteAnswer${t.questionIndex}${t.answerIndex}`,i.deleteDisabled)),class:_(["bi bi-trash3-fill primary",{"clickable-icon text-white":!i.deleteDisabled}]),style:{color:"var(--second-dark-color)"},"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Supprimer la réponse"},null,42,B)],2)]),h(e("input",{class:"form-check-input invisible",type:"checkbox",value:"",id:`checkAnswer${t.questionIndex}-${t.answerIndex}`,"onUpdate:modelValue":s[4]||(s[4]=u=>t.answer.valid=u)},null,8,L),[[y,t.answer.valid]])])],64)}const j=v(A,[["render",S]]),U={props:{question:{type:Object,default:{}},topics:{type:Array,default:[]},questionIndex:{type:Number,default:0},activeIndex:{type:Number,default:0}},components:{QuizAnswer:j},methods:{enableTooltip(n){const s=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(s).enable()},deleteAnswer(n){this.question.answers.length>2&&this.question.answers.splice(n,1)},addAnswer(){this.question.answers.push({name:"",valid:!1})}}},E=["id"],O={class:"col-11 pe-0"},P=["data-bs-target"],F={key:0},K={class:"col-1 px-0 d-flex justify-content-center align-items-center"},R={class:"btn","data-bs-toggle":"modal","data-bs-target":"#warningModal",type:"button"},G=["id","data-bs-original-title"],H=["id"],J={class:"accordion-body"},W={class:"row"},X={class:"col-12"},Y=["for"],Z=["name","id"],$={class:"row"},ee={class:"col-12"},te=["for"],se=["id","name"],ne={class:"row mt-5"},oe={class:"col-12"},ie={class:"col-12"},le={class:"col-12 mt-2"},ae=["disabled"],de={key:0},ue=e("i",{class:"bi bi-plus-circle me-3"},null,-1),ce={key:1},re=["for"],me=e("h3",null,"Description de la ou les bonne(s) réponse(s)",-1),be=[me],_e=["id","name"];function he(n,s,t,q,l,i){const u=I("QuizAnswer");return a(),d(m,null,[e("h3",{class:"accordion-header row d-flex me-0",id:`heading${t.questionIndex}`},[e("div",O,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${t.questionIndex}`},[r(" Question "+c(t.questionIndex+1)+" ",1),t.question.name?(a(),d("span",F," : "+c(t.question.name),1)):f("",!0)],8,P)]),e("div",K,[e("button",R,[e("i",{class:"bi bi-trash3-fill primary clickable-icon",id:"deleteQuestion"+t.questionIndex,style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onClick:s[0]||(s[0]=o=>n.$emit("askDeleteQuestion",t.questionIndex)),"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Supprimer la question "+(t.questionIndex+1),onMouseover:s[1]||(s[1]=o=>i.enableTooltip(`deleteQuestion${t.questionIndex}`))},null,40,G)])])],8,E),e("div",{id:`collapse${t.questionIndex}`,class:_(["accordion-collapse collapse",{show:t.activeIndex===t.questionIndex}]),"data-bs-parent":"#questionsList"},[e("div",J,[e("div",W,[e("div",X,[e("label",{for:`questionName${t.questionIndex}`,class:"fs-6"},"Question",8,Y),h(e("input",{name:`questionName${t.questionIndex}`,id:`questionName${t.questionIndex}`,"onUpdate:modelValue":s[2]||(s[2]=o=>t.question.name=o),type:"text",class:"form-control mb-2"},null,8,Z),[[w,t.question.name]])])]),e("div",$,[e("div",ee,[e("label",{for:`questionTopic${t.questionIndex}`}," Choisissez le thème de votre question : ",8,te),h(e("select",{class:"form-select",id:`questionTopic${t.questionIndex}`,name:`questionTopic${t.questionIndex}`,"onUpdate:modelValue":s[3]||(s[3]=o=>t.question.topic=o)},[(a(!0),d(m,null,x(t.topics,(o,b)=>(a(),d("option",null,c(o.name),1))),256))],8,se),[[p,t.question.topic]])])]),e("div",ne,[e("div",oe,[e("h3",null,"Proposez "+c(t.question.answers.length)+" réponses puis cochez la ou les bonne(s) réponse(s) :",1)]),(a(!0),d(m,null,x(t.question.answers,(o,b)=>(a(),d("div",ie,[g(u,{answer:o,questionIndex:t.questionIndex,answerIndex:b,answersLength:t.question.answers.length,onDeleteAnswer:i.deleteAnswer},null,8,["answer","questionIndex","answerIndex","answersLength","onDeleteAnswer"])]))),256)),e("div",le,[e("button",{class:"btn primary-button-outlined col-12",onClick:s[4]||(s[4]=(...o)=>i.addAnswer&&i.addAnswer(...o)),disabled:t.question.answers.length>=10,type:"button"},[t.question.answers.length<10?(a(),d("span",de,[ue,r(" Ajouter une proposition de réponse ")])):(a(),d("span",ce," Vous ne pouvez pas proposer plus de 10 réponses "))],8,ae)])]),e("div",null,[e("label",{for:`answerDescription${t.questionIndex}`,class:"form-label mt-5"},be,8,re),e("textarea",{class:"form-control",id:`answerDescription${t.questionIndex}`,name:`answerDescription${t.questionIndex}`,rows:"5"},null,8,_e)])])],10,H)],64)}const qe=v(U,[["render",he]]),xe={data(){return{quiz:{name:"",questions:[]},indexDelete:0,topics:[],activeIndex:0}},components:{QuizQuestions:qe},computed:{...z(Q,["token"])},mounted(){this.addQuestion(),this.getAllTopics()},methods:{createQuiz(){this.$router.push({name:"quiz"})},addQuestion(){this.quiz.questions.push({name:"",topic:"",answers:[{name:"",valid:!1},{name:"",valid:!1}],answerDescription:""});const n=this.quiz.questions.length-1;this.activeIndex=n},askDeleteQuestion(n){this.indexDelete=n},deleteQuestion(n){this.quiz.questions.splice(n,1)},async getAllTopics(){const n={Authorization:`Bearer ${this.token}`},s=await this.$http.get("/topics",{headers:n});s.status==200||s.status==204?this.topics=s.body:console.error(s)}}},ve={class:"modal fade",id:"warningModal",tabindex:"-1"},we={class:"modal-dialog"},Ie={class:"modal-content"},fe={class:"modal-header"},ge={class:"modal-title fs-5 text-danger",id:"exampleModalLabel"},ye=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),pe={class:"modal-body"},ze={key:0},ke={class:"modal-footer"},Qe=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Annuler",-1),Ae=e("h1",null,"Créer un quiz",-1),De={class:"outlined my-4 p-4"},Ce={class:"row"},Te={class:"col-12 col-md-8"},Ne=e("label",{for:"name",class:"fs-5 mt-2"},"Nom du Quiz",-1),Me=e("div",{class:"col-12 col-md-4"},[e("label",{for:"image",class:"fs-5 mt-2"},"Illustration du quiz"),e("input",{class:"form-control",type:"file",id:"image"})],-1),Ve=e("div",{class:"col-12 my-4"},[e("p",null,[r("Veuillez ajouter entre 5 et 50 questions pour votre quiz"),e("br"),r(" Attention au choix de l’image et du nom de votre quiz, ce sont les informations que les utilisateurs verront !")])],-1),Be={class:"accordion",id:"questionsList"},Le=e("i",{class:"bi bi-plus-circle",id:"addButton"},null,-1),Se={class:"align-items-end flex-column px-2 row mb-5"},je=e("i",{class:"bi bi-plus-circle me-3"},null,-1);function Ue(n,s,t,q,l,i){const u=I("QuizQuestions");return a(),d(m,null,[e("div",ve,[e("div",we,[e("div",Ie,[e("div",fe,[e("h1",ge,"Êtes-vous sûr.e de vouloir supprimer la question "+c(l.indexDelete+1)+" ?",1),ye]),e("div",pe,[r(" Cette action est irréversible, et vous perdrez toute la question "+c(l.indexDelete+1)+" : ",1),l.quiz.questions[l.indexDelete]?(a(),d("b",ze,c(l.quiz.questions[l.indexDelete].name),1)):f("",!0)]),e("div",ke,[Qe,e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=o=>i.deleteQuestion(l.indexDelete))},"Supprimer")])])])]),Ae,e("form",{class:"my-5",onSubmit:s[3]||(s[3]=k(o=>i.createQuiz(),["prevent"]))},[e("div",De,[e("div",Ce,[e("div",Te,[Ne,h(e("input",{name:"name",id:"name",type:"text",maxlength:"255",class:"form-control",placeholder:"Ex : recrutement","onUpdate:modelValue":s[1]||(s[1]=o=>l.quiz.name=o)},null,512),[[w,l.quiz.name]])]),Me,Ve]),e("div",Be,[(a(!0),d(m,null,x(l.quiz.questions,(o,b)=>(a(),d("div",{class:"accordion-item",key:b,ref_for:!0,ref:"accordionItems"},[g(u,{question:o,questionIndex:b,topics:l.topics,activeIndex:l.activeIndex,onAskDeleteQuestion:i.askDeleteQuestion},null,8,["question","questionIndex","topics","activeIndex","onAskDeleteQuestion"])]))),128)),e("button",{class:"btn secundary-button mt-4",onClick:s[2]||(s[2]=(...o)=>i.addQuestion&&i.addQuestion(...o)),type:"button"},[Le,r(" Ajouter une question ")])])])],32),e("div",Se,[e("button",{class:"btn primary-button mt-2 col-12 col-md-3",type:"submit",onClick:s[4]||(s[4]=(...o)=>i.createQuiz&&i.createQuiz(...o))},[je,r(" Créer un quiz ")])])],64)}const Oe=v(xe,[["render",Ue]]);export{Oe as default};
