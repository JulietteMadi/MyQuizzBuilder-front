import{S as $}from"./SignIn-0678ad59.js";import{c as g,u as w,r as a,m as b,a as x,e as y}from"./index-59040036.js";import{_,o as f,c as h,a as s,h as l,v as d,n as c,i as I,r as m,f as u}from"./index-e330a1bf.js";const S=g.regex(/(?=.\d)(?=.[a-z])(?=.[A-Z])(?=.[!$*])(?!. ).{8,42}/),V={setup(){return{v$:w({$autoDirty:!0})}},data(){return{pseudo:"",email:"",password:""}},validations(){return{pseudo:{required:a,minLength:b(4),maxLength:x(20)},email:{required:a,email:y},password:{required:a,passwordValidator:S}}},methods:{async checkIdentifier(){if(await this.v$.$validate()){const e={email:this.email,name:this.pseudo,password:this.password},n=await this.$http.post("/sign-up",e);n.status==204||n.status==200?(this.$router.push({name:"signIn"}),this.$toast.success("Votre compte a bien été créé")):(console.error(n),this.$toast.error("toast-app","Un problème est survenu à la création de votre compte"))}else this.$toast.error("toast-app","Les informations ne sont pas valides")}}},U={class:"mb-3"},k=s("label",{for:"pseudo",class:"form-label"},"Pseudo",-1),L=s("div",{id:"pseudoHelp",class:"form-text"},"Votre futur pseudo doit être unique ",-1),C={class:"mb-3"},z=s("label",{for:"email",class:"form-label"},"E-mail",-1),B=s("div",{id:"emailHelp",class:"form-text"},"Renseignez votre adresse mail professionnelle ou personnelle ",-1),H={class:"mb-3"},M=s("label",{for:"password",class:"form-label"},"Password",-1),q=s("div",{id:"identifierHelp",class:"form-text"},"Il doit contenir plus de 8 caractères, par exemple Rantanplan31! ",-1),D=s("button",{type:"submit",class:"btn primary-button my-3"},"Créer mon compte",-1);function E(p,e,n,i,t,r){return f(),h("form",{novalidate:"",onSubmit:e[3]||(e[3]=I((...o)=>r.checkIdentifier&&r.checkIdentifier(...o),["prevent"]))},[s("div",U,[k,l(s("input",{type:"text",class:c(["form-control",{"is-invalid":i.v$.pseudo.$error}]),id:"pseudo","onUpdate:modelValue":e[0]||(e[0]=o=>t.pseudo=o)},null,2),[[d,t.pseudo]]),L]),s("div",C,[z,l(s("input",{type:"text",class:c(["form-control",{"is-invalid":i.v$.email.$error}]),id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>t.email=o)},null,2),[[d,t.email]]),B]),s("div",H,[M,l(s("input",{type:"password",class:c(["form-control",{"is-invalid":i.v$.password.$error}]),id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>t.password=o)},null,2),[[d,t.password]]),q]),D],32)}const N=_(V,[["render",E]]),P={data(){return{wrongIdentifier:!1,identifier:"",password:""}},components:{SignIn:$,SignUp:N}},R={class:"container-xl"},j={class:"row py-5 d-flex justify-content-center"},A={class:"col-12 col-lg-6"},T=s("h1",null,"Créer un compte",-1),Z={class:"col-12 col-lg-6"},F=s("h1",null,"Me connecter",-1);function G(p,e,n,i,t,r){const o=m("SignUp"),v=m("SignIn");return f(),h("section",R,[s("div",j,[s("div",A,[T,u(o)]),s("div",Z,[F,u(v)])])])}const Q=_(P,[["render",G]]);export{Q as default};
