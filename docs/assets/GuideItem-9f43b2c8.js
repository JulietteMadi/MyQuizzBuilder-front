import{u as k,c as r,r as h,m as v,a as _}from"./index-c37ef78c.js";import{_ as N,o as a,c as s,a as t,b as x,t as g,h as c,p as w,n as b,F as G,e as L,v as m,d as f}from"./index-a462798d.js";const U=n=>n.includes("majrh.fr"),M={setup(){return{v$:k({$autoDirty:!0})}},data(){return{chosenGuideName:"",oldGuide:!0,updateGuide:!1}},validations(){return{guide:{name:{required:r.withMessage("Veuillez renseigner un nom de fiche pratique",h),minLength:r.withMessage("Le nom doit contenir au moins 5 caractères",v(5)),maxLength:r.withMessage("Le nom ne doit pas faire plus de 100 caractères",_(100))},url:{required:r.withMessage("Veuillez renseigner une URL",h),urlValidator:r.withMessage("L'url doit contenir un lien vers majrh.fr",U),minLength:r.withMessage("L'url doit contenir au moins 5 caractères",v(5)),maxLength:r.withMessage("Le nom ne doit pas faire plus de 100 caractères",_(100))}}}},props:{index:{type:Number,default:null},guide:{type:Object,default:null},availableGuides:{type:Array,default:null},allGuides:{type:Object,default:null}},methods:{activateOldGuide(){this.oldGuide=!0,this.resetGuide()},activateNewGuide(){this.oldGuide=!1,this.resetGuide()},enableTooltip(n){const i=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(i).enable()},updateGuideInfo(){const n=this.availableGuides.find(i=>i.name===this.chosenGuideName);n&&(this.guide.id=n.id,this.guide.name=n.name,this.guide.url=n.url,this.guide.image=n.image)},resetGuide(){this.guide.url="",this.guide.name="",this.guide.image="",this.guide.noUpdate=!0,this.chosenGuideName="",this.updateGuide=!1,this.$emit("updateGuidesList")},disableTooltip(n){const i=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(i).dispose()},setUpdateGuide(){this.guide.noUpdate=!1}}},V=["id"],q={class:"modal-dialog"},C={class:"modal-content"},I=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5 text-danger",id:"labelModal"},"Attention"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),O={class:"modal-body"},T=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"J'ai compris")],-1),j={class:"btn-group col-12",role:"group"},z=["id","name"],B=["for"],E=["id","name"],D=["for"],S={key:0,class:"col-12 col-md-11"},p=["for"],A=["id","name"],F={key:1,class:"input-group"},R=["id","disabled"],J={class:"btn primary-button",type:"button"},H=["id"],K=["data-bs-target"],P=["id"],Q={class:"container"},W={class:"row"},X={class:"col-12 col-md-8 px-0 pe-md-3"},Y=["for"],Z=["id","name"],$={class:"col-12 col-md-4 px-0"},ee=["for"],ie=["id","disabled"],te={key:1,class:"col-12 col-md-11"},de=["for"],le=["id","name"],ne={key:0,class:"text-danger"},ae={class:"container"},se={class:"row"},oe={class:"col-12 col-md-8 px-0 pe-md-3"},ue=["for"],re=["id","name"],ce={key:0,class:"text-danger"},me={class:"col-12 col-md-4 px-0"},ge=["for"],be=["id"],fe={class:"col-12 col-md-1 d-flex align-items-center md-justify-content-center justify-content-evenly flex-md-column flex-row mt-2"},he=["id"],ve=["id"];function _e(n,i,e,u,o,l){return a(),s(G,null,[t("div",{class:"modal fade",id:"warningModalGuide"+e.index,tabindex:"-1"},[t("div",q,[t("div",C,[I,t("div",O,[x(" Si vous change le nom ou l'image de "),t("b",null,g(e.guide.name),1),x(", ces changements seront effectifs dans tous les autres thèmes qui incluent cette fiche pratique. ")]),T])])],8,V),t("div",j,[t("input",{id:`guideOption${e.index}1`,onClick:i[0]||(i[0]=(...d)=>l.activateOldGuide&&l.activateOldGuide(...d)),name:`guideOption${e.index}`,class:"btn-check",type:"radio",autocomplete:"off",checked:""},null,8,z),t("label",{class:"btn btn-outline",for:`guideOption${e.index}1`},"Utiliser une fiche pre-existante",8,B),t("input",{id:`guideOption${e.index}2`,onClick:i[1]||(i[1]=(...d)=>l.activateNewGuide&&l.activateNewGuide(...d)),name:`guideOption${e.index}`,class:"btn-check",type:"radio",autocomplete:"off"},null,8,E),t("label",{class:"btn btn-outline",for:`guideOption${e.index}2`},"Créer une nouvelle fiche pratique",8,D)]),o.oldGuide?(a(),s("div",S,[t("label",{for:`chosenGuideName${e.index}`,class:"form-label required col-12"},"Nom de la fiche",8,p),e.guide.url?(a(),s("div",F,[c(t("input",{id:`guideName${e.index}`,"onUpdate:modelValue":i[4]||(i[4]=d=>e.guide.name=d),disabled:!o.updateGuide,class:"form-control"},null,8,R),[[m,e.guide.name]]),t("button",J,[o.updateGuide?(a(),s("i",{key:0,id:"saveGuide"+e.index,onClick:i[5]||(i[5]=d=>(l.disableTooltip("saveGuide"+e.index),o.updateGuide=!1,n.$emit("updateGuidesList"))),class:"bi bi-save",style:{color:"white"},onMouseover:i[6]||(i[6]=d=>l.enableTooltip(`saveGuide${e.index}`)),"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Enregistrer cette fiche pratique"},null,40,H)):(a(),s("span",{key:1,"data-bs-toggle":"modal","data-bs-target":"#warningModalGuide"+e.index},[t("i",{id:"updateGuide"+e.index,onClick:i[7]||(i[7]=d=>(l.disableTooltip("updateGuide"+e.index),o.updateGuide=!0,l.setUpdateGuide())),class:"bi bi-pencil-square",style:{color:"white"},onMouseover:i[8]||(i[8]=d=>l.enableTooltip(`updateGuide${e.index}`)),"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Modifier cette fiche pratique"},null,40,P)],8,K))])])):c((a(),s("select",{key:0,id:`chosenGuideName${e.index}`,"onUpdate:modelValue":i[2]||(i[2]=d=>o.chosenGuideName=d),name:`guideName${e.index}`,onChange:i[3]||(i[3]=(...d)=>l.updateGuideInfo&&l.updateGuideInfo(...d)),class:b(["form-select",{"is-invalid":u.v$.guide.name.$error}])},[(a(!0),s(G,null,L(e.availableGuides,(d,y)=>(a(),s("option",{key:y},g(d.name),1))),128))],42,A)),[[w,o.chosenGuideName]]),t("div",Q,[t("div",W,[t("div",X,[t("label",{for:`guideUrl${e.index}`},"Lien vers la fiche",8,Y),c(t("input",{id:`guideUrl${e.index}`,"onUpdate:modelValue":i[9]||(i[9]=d=>e.guide.url=d),name:`guideUrl${e.index}`,type:"text",class:"form-control",disabled:""},null,8,Z),[[m,e.guide.url]])]),t("div",$,[t("label",{for:`guideImage${e.index}`},"Lien vers l'image d'illustration",8,ee),c(t("input",{id:`guideImage${e.index}`,"onUpdate:modelValue":i[10]||(i[10]=d=>e.guide.image=d),disabled:!o.updateGuide,class:"form-control",type:"text"},null,8,ie),[[m,e.guide.image]])])])])])):(a(),s("div",te,[t("label",{for:`guideName${e.index}`,class:"fs-6"},"Nom de la fiche",8,de),c(t("input",{id:`guideName${e.index}`,"onUpdate:modelValue":i[11]||(i[11]=d=>e.guide.name=d),name:`guideName${e.index}`,type:"text",class:b(["form-control mb-2",{"is-invalid":u.v$.guide.name.$error}])},null,10,le),[[m,e.guide.name]]),u.v$.guide.name.$error?(a(),s("p",ne,g(u.v$.guide.name.$errors[0].$message),1)):f("",!0),t("div",ae,[t("div",se,[t("div",oe,[t("label",{for:`guideUrl${e.index}`}," Lien vers la fiche ",8,ue),c(t("input",{id:`guideUrl${e.index}`,"onUpdate:modelValue":i[12]||(i[12]=d=>e.guide.url=d),name:`guideUrl${e.index}`,type:"text",class:b(["form-control",{"is-invalid":u.v$.guide.url.$error}])},null,10,re),[[m,e.guide.url]]),u.v$.guide.url.$error?(a(),s("p",ce,g(u.v$.guide.url.$errors[0].$message),1)):f("",!0)]),t("div",me,[t("label",{for:`guideImage${e.index}`}," Lien vers l'image d'illustration ",8,ge),c(t("input",{id:`guideImage${e.index}`,"onUpdate:modelValue":i[13]||(i[13]=d=>e.guide.image=d),class:"form-control",type:"text"},null,8,be),[[m,e.guide.image]])])])])])),t("div",fe,[o.oldGuide?(a(),s("i",{key:0,id:"change"+e.index,onClick:i[14]||(i[14]=d=>l.resetGuide()),class:"bi bi-arrow-left-right primary clickable-icon",style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onMouseover:i[15]||(i[15]=d=>l.enableTooltip(`change${e.index}`)),"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Choisir une autre fiche pratique"},null,40,he)):f("",!0),t("i",{id:"delete"+e.index,onClick:i[16]||(i[16]=d=>(n.$emit("deleteGuide",e.index),l.disableTooltip(`delete${e.index}`))),class:"bi bi-trash3-fill primary clickable-icon",style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onMouseover:i[17]||(i[17]=d=>l.enableTooltip(`delete${e.index}`)),"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Retirer cette fiche pratique"},null,40,ve)])],64)}const ye=N(M,[["render",_e]]);export{ye as G};
