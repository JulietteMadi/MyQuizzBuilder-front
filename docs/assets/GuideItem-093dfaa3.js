import{u as y,r as b,m as f,a as h}from"./index-59040036.js";import{_ as k,o,c as a,a as i,b as v,t as _,h as u,p as N,n as m,F as x,e as U,v as r,d as g}from"./index-e330a1bf.js";const C=n=>n.includes("majrh.fr"),L={setup(){return{v$:y({$autoDirty:!0})}},data(){return{chosenGuideName:"",oldGuide:!0,updateGuide:!1}},validations(){return{guide:{name:{required:b,minLength:f(5),maxLength:h(100)},url:{required:b,minLength:f(5),maxLength:h(100),urlValidator:C}}}},props:{index:{type:Number,default:null},guide:{type:Object,default:null},availableGuides:{type:Array,default:null},allGuides:{type:Object,default:null}},methods:{activateOldGuide(){this.oldGuide=!0,this.resetGuide()},activateNewGuide(){this.oldGuide=!1,this.resetGuide()},enableTooltip(n){const t=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(t).enable()},updateGuideInfo(){const n=this.availableGuides.find(t=>t.name===this.chosenGuideName);n&&(this.guide.name=n.name,this.guide.url=n.url,this.guide.image=n.image)},resetGuide(){this.guide.url="",this.guide.name="",this.guide.image="",this.guide.noUpdate=!0,this.chosenGuideName="",this.updateGuide=!1,this.$emit("updateGuidesList")},disableTooltip(n){const t=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(t).dispose()},setUpdateGuide(){this.guide.noUpdate=!1}}},q=["id"],I={class:"modal-dialog"},O={class:"modal-content"},V=i("div",{class:"modal-header"},[i("h1",{class:"modal-title fs-5 text-danger",id:"labelModal"},"Attention"),i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),T={class:"modal-body"},w=i("div",{class:"modal-footer"},[i("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"J'ai compris")],-1),M={class:"btn-group col-12",role:"group"},j=["name","id"],B=["for"],E=["name","id"],z=["for"],D={key:0,class:"col-12 col-md-11"},S=["for"],p=["id","name"],A={key:1,class:"input-group"},F=["id","disabled"],J={class:"btn primary-button",type:"button"},R=["id"],H=["data-bs-target"],K=["id"],P={class:"container"},Q={class:"row"},W={class:"col-12 col-md-8 px-0 pe-md-3"},X=["for"],Y=["name","id"],Z={class:"col-12 col-md-4 px-0"},$=["for"],ee=["id","disabled"],te={key:1,class:"col-12 col-md-11"},ie=["for"],de=["name","id"],le={key:0,class:"text-danger"},ne={class:"container"},oe={class:"row"},ae={class:"col-12 col-md-8 px-0 pe-md-3"},se=["for"],ue=["name","id"],re={key:0,class:"text-danger"},ce={class:"col-12 col-md-4 px-0"},me=["for"],ge=["id"],be={class:"col-12 col-md-1 d-flex align-items-center justify-content-center flex-column"},fe=["id"],he=["id"];function ve(n,t,e,c,s,l){return o(),a(x,null,[i("div",{class:"modal fade",id:"warningModalGuide"+e.index,tabindex:"-1"},[i("div",I,[i("div",O,[V,i("div",T,[v(" Si vous change le nom ou l'image de "),i("b",null,_(e.guide.name),1),v(", ces changements seront effectifs dans tous les autres thèmes qui incluent cette fiche pratique. ")]),w])])],8,q),i("div",M,[i("input",{type:"radio",class:"btn-check",name:`guideOption${e.index}`,id:`guideOption${e.index}1`,autocomplete:"off",onClick:t[0]||(t[0]=(...d)=>l.activateOldGuide&&l.activateOldGuide(...d)),checked:""},null,8,j),i("label",{class:"btn btn-outline",for:`guideOption${e.index}1`},"Utiliser une fiche pre-existante",8,B),i("input",{type:"radio",class:"btn-check",name:`guideOption${e.index}`,id:`guideOption${e.index}2`,autocomplete:"off",onClick:t[1]||(t[1]=(...d)=>l.activateNewGuide&&l.activateNewGuide(...d))},null,8,E),i("label",{class:"btn btn-outline",for:`guideOption${e.index}2`},"Créer une nouvelle fiche pratique",8,z)]),s.oldGuide?(o(),a("div",D,[i("label",{for:`chosenGuideName${e.index}`,class:"form-label required col-12"},"Nom de la fiche",8,S),e.guide.url?(o(),a("div",A,[u(i("input",{id:`guideName${e.index}`,"onUpdate:modelValue":t[4]||(t[4]=d=>e.guide.name=d),class:"form-control",disabled:!s.updateGuide},null,8,F),[[r,e.guide.name]]),i("button",J,[s.updateGuide?(o(),a("i",{key:0,class:"bi bi-save",style:{color:"white"},onClick:t[5]||(t[5]=d=>(l.disableTooltip("saveGuide"+e.index),s.updateGuide=!1,n.$emit("updateGuidesList"))),id:"saveGuide"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Enregistrer cette fiche pratique",onMouseover:t[6]||(t[6]=d=>l.enableTooltip(`saveGuide${e.index}`))},null,40,R)):(o(),a("span",{key:1,"data-bs-toggle":"modal","data-bs-target":"#warningModalGuide"+e.index},[i("i",{class:"bi bi-pencil-square",style:{color:"white"},onClick:t[7]||(t[7]=d=>(l.disableTooltip("updateGuide"+e.index),s.updateGuide=!0,l.setUpdateGuide())),id:"updateGuide"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Modifier cette fiche pratique",onMouseover:t[8]||(t[8]=d=>l.enableTooltip(`updateGuide${e.index}`))},null,40,K)],8,H))])])):u((o(),a("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=d=>s.chosenGuideName=d),id:`chosenGuideName${e.index}`,name:`guideName${e.index}`,class:m(["form-select",{"is-invalid":c.v$.guide.name.$error}]),onChange:t[3]||(t[3]=(...d)=>l.updateGuideInfo&&l.updateGuideInfo(...d))},[(o(!0),a(x,null,U(e.availableGuides,(d,G)=>(o(),a("option",{key:G},_(d.name),1))),128))],42,p)),[[N,s.chosenGuideName]]),i("div",P,[i("div",Q,[i("div",W,[i("label",{for:`guideUrl${e.index}`},"Lien vers la fiche",8,X),u(i("input",{name:`guideUrl${e.index}`,id:`guideUrl${e.index}`,"onUpdate:modelValue":t[9]||(t[9]=d=>e.guide.url=d),type:"text",maxlength:"255",class:"form-control",disabled:""},null,8,Y),[[r,e.guide.url]])]),i("div",Z,[i("label",{for:`guideImage${e.index}`},"Lien vers l'image d'illustration",8,$),u(i("input",{class:"form-control",type:"text",id:`guideImage${e.index}`,"onUpdate:modelValue":t[10]||(t[10]=d=>e.guide.image=d),disabled:!s.updateGuide},null,8,ee),[[r,e.guide.image]])])])])])):(o(),a("div",te,[i("label",{for:`guideName${e.index}`,class:"fs-6"},"Nom de la fiche",8,ie),u(i("input",{name:`guideName${e.index}`,id:`guideName${e.index}`,"onUpdate:modelValue":t[11]||(t[11]=d=>e.guide.name=d),type:"text",maxlength:"100",class:m(["form-control mb-2",{"is-invalid":c.v$.guide.name.$error}])},null,10,de),[[r,e.guide.name]]),c.v$.guide.name.$error?(o(),a("p",le,"Ce champs est obligatoire et doit contenir entre 3 et 100 caractères")):g("",!0),i("div",ne,[i("div",oe,[i("div",ae,[i("label",{for:`guideUrl${e.index}`},"Lien vers la fiche",8,se),u(i("input",{name:`guideUrl${e.index}`,id:`guideUrl${e.index}`,"onUpdate:modelValue":t[12]||(t[12]=d=>e.guide.url=d),type:"text",maxlength:"255",class:m(["form-control",{"is-invalid":c.v$.guide.url.$error}])},null,10,ue),[[r,e.guide.url]]),c.v$.guide.url.$error?(o(),a("p",re,"L'url est obligatoire et doit corresondre au site majrh.fr")):g("",!0)]),i("div",ce,[i("label",{for:`guideImage${e.index}`},"Lien vers l'image d'illustration",8,me),u(i("input",{class:"form-control",type:"text",id:`guideImage${e.index}`,"onUpdate:modelValue":t[13]||(t[13]=d=>e.guide.image=d),required:""},null,8,ge),[[r,e.guide.image]])])])])])),i("div",be,[s.oldGuide?(o(),a("i",{key:0,class:"bi bi-arrow-left-right primary clickable-icon",style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onClick:t[14]||(t[14]=d=>l.resetGuide()),id:"change"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Choisir une autre fiche pratique",onMouseover:t[15]||(t[15]=d=>l.enableTooltip(`change${e.index}`))},null,40,fe)):g("",!0),i("i",{class:"bi bi-trash3-fill primary clickable-icon",style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onClick:t[16]||(t[16]=d=>n.$emit("deleteGuide",e.index)),id:"delete"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Retirer cette fiche pratique",onMouseover:t[17]||(t[17]=d=>l.enableTooltip(`delete${e.index}`))},null,40,he)])],64)}const Ge=k(L,[["render",ve]]);export{Ge as G};
