import{T}from"./TopicItem-c9f683fd.js";import{_,m as b,r as c,o as n,c as r,a as e,b as p,t as f,d as v,f as l,w as g,h as y,v as x,F as d,e as D,u as k}from"./index-c48083d6.js";const w={data(){return{allTopics:[{id:1,name:"Recrutement"},{id:2,name:"Onboarding"},{id:3,name:"Sensibilisation"},{id:4,name:"RSE en grand groupe"},{id:5,name:"Jeunes entrepreneurs"},{id:6,name:"Parité en entreprise"},{id:7,name:"Formations internes"},{id:8,name:"Rédaction de fiche emploi"},{id:9,name:"Sélectionner les CV"}],searchTopic:""}},components:{TopicItem:T},computed:{...b(k,["token"]),filteredTopics(){const s=this.searchTopic.toLowerCase();return s?this.allTopics.filter(t=>t.name.toLowerCase().includes(s)):this.allTopics.reverse()}},mounted(){this.getAllTopics()},methods:{askDeleteTopic(s){this.topicToDelete=this.allTopics.find(t=>t.id===s)},updateTopic(s,t){this.$router.push({name:"modifierTheme",params:{id:s,name:t}})},async getAllTopics(){const s={Authorization:`Bearer ${this.token}`},t=await this.$http.get("/topics",{headers:s});t.status==200||t.status==204?this.allTopics=t.body:console.error(t)},async deleteTopic(s){const t={Authorization:`Bearer ${this.token}`},o=await this.$http.delete(`/topics/${s}`,{headers:t});o.status===204||o.status===200?(await this.getAllTopics(),this.$toast.success("toast-app",`Le thème ${this.topicToDelete.name} a bien été supprimé`)):(console.error(error),this.$toast.error("toast-app",`Un problème est survenu à la suppression du thème ${this.topicToDelete.name}`))}}},$={class:"modal fade",id:"warningModalTopic",tabindex:"-1"},C={class:"modal-dialog"},L={class:"modal-content"},S=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5 text-danger",id:"labelModal"},"Êtes-vous sûr.e de vouloir supprimer ce thème ?"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),A={class:"modal-body"},R={key:0},V={class:"modal-footer"},B=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Annuler",-1),U={class:"row my-5 mx-auto"},N=e("div",{class:"col-md mx-auto"},[e("h1",null,"Liste de mes thèmes")],-1),z={class:"col-md mx-auto"},F=e("button",{class:"btn secundary-button float-md-end btn-lg",type:"button"},[e("i",{class:"bi bi-plus-circle"}),p(" Créer un thème ")],-1),I={class:"col-12 p-2 mt-5 input-group"},M=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})],-1),E={class:"row my-5 mx-auto text-center"},J={class:"col-12 col-sm-6 col-md-4 col-lg-3 py-3"};function O(s,t,o,P,j,i){const m=c("RouterLink"),u=c("TopicItem");return n(),r(d,null,[e("div",$,[e("div",C,[e("div",L,[S,e("div",A,[p(" Cette action est irréversible, et vous perdrez toute le thème : "),s.topicToDelete?(n(),r("b",R,f(s.topicToDelete.name),1)):v("",!0)]),e("div",V,[B,e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=a=>i.deleteTopic(s.topicToDelete.id))},"Supprimer")])])])]),e("div",U,[N,e("div",z,[l(m,{to:"/creer-theme"},{default:g(()=>[F]),_:1})]),e("div",I,[M,y(e("input",{type:"text",class:"form-control",id:"searchTopic",placeholder:"Rechercher un thème","onUpdate:modelValue":t[1]||(t[1]=a=>s.searchTopic=a)},null,512),[[x,s.searchTopic]])])]),e("div",E,[(n(!0),r(d,null,D(i.filteredTopics,(a,h)=>(n(),r("div",J,[l(u,{topic:a,index:h.toString(),onDeleteTopic:i.askDeleteTopic,onUpdateTopic:i.updateTopic},null,8,["topic","index","onDeleteTopic","onUpdateTopic"])]))),256))])],64)}const H=_(w,[["render",O]]);export{H as default};
