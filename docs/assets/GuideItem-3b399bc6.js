import{u as k,c as m,r as h,m as f,a as v}from"./index-91f46439.js";import{_ as N,o as a,c as o,a as i,b as _,t as x,h as u,p as U,n as g,F as G,e as C,v as r,d as b}from"./index-cac0b148.js";const L=n=>n.includes("majrh.fr"),q={setup(){return{v$:k({$autoDirty:!0})}},data(){return{chosenGuideName:"",oldGuide:!0,updateGuide:!1}},validations(){return{guide:{name:{required:m.withMessage("Ce champs ne peut pas être vide",h),minLength:f(5),maxLength:v(100)},url:{required:m.withMessage("Ce champs ne peut pas être vide",h),minLength:f(5),maxLength:v(100),urlValidator:m.withMessage("L'url de la fiche pratique doit correspondre au site majrh.fr",L)}}}},props:{index:{type:Number,default:null},guide:{type:Object,default:null},availableGuides:{type:Array,default:null},allGuides:{type:Object,default:null}},methods:{activateOldGuide(){this.oldGuide=!0,this.resetGuide()},activateNewGuide(){this.oldGuide=!1,this.resetGuide()},enableTooltip(n){const t=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(t).enable()},updateGuideInfo(){const n=this.availableGuides.find(t=>t.name===this.chosenGuideName);n&&(this.guide.name=n.name,this.guide.url=n.url,this.guide.image=n.image)},resetGuide(){this.guide.url="",this.guide.name="",this.guide.image="",this.guide.noUpdate=!0,this.chosenGuideName="",this.updateGuide=!1,this.$emit("updateGuidesList")},disableTooltip(n){const t=document.getElementById(n);bootstrap.Tooltip.getOrCreateInstance(t).dispose()},setUpdateGuide(){this.guide.noUpdate=!1}}},w=["id"],I={class:"modal-dialog"},M={class:"modal-content"},O=i("div",{class:"modal-header"},[i("h1",{class:"modal-title fs-5 text-danger",id:"labelModal"},"Attention"),i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),V={class:"modal-body"},T=i("div",{class:"modal-footer"},[i("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"J'ai compris")],-1),p={class:"btn-group col-12",role:"group"},j=["name","id"],B=["for"],E=["name","id"],z=["for"],D={key:0,class:"col-12 col-md-11"},S=["for"],A=["id","name"],F={key:1,class:"input-group"},J=["id","disabled"],R={class:"btn primary-button",type:"button"},H=["id"],K=["data-bs-target"],P=["id"],Q={class:"container"},W={class:"row"},X={class:"col-12 col-md-8 px-0 pe-md-3"},Y=["for"],Z=["name","id"],$={class:"col-12 col-md-4 px-0"},ee=["for"],te=["id","disabled"],ie={key:1,class:"col-12 col-md-11"},de=["for"],le=["name","id"],ne={key:0,class:"text-danger"},ae={class:"container"},oe={class:"row"},se={class:"col-12 col-md-8 px-0 pe-md-3"},ue=["for"],re=["name","id"],ce={key:0,class:"text-danger"},me={class:"col-12 col-md-4 px-0"},ge=["for"],be=["id"],he={class:"col-12 col-md-1 d-flex align-items-center justify-content-center flex-column"},fe=["id"],ve=["id"];function _e(n,t,e,c,s,l){return a(),o(G,null,[i("div",{class:"modal fade",id:"warningModalGuide"+e.index,tabindex:"-1"},[i("div",I,[i("div",M,[O,i("div",V,[_(" Si vous change le nom ou l'image de "),i("b",null,x(e.guide.name),1),_(", ces changements seront effectifs dans tous les autres thèmes qui incluent cette fiche pratique. ")]),T])])],8,w),i("div",p,[i("input",{type:"radio",class:"btn-check",name:`guideOption${e.index}`,id:`guideOption${e.index}1`,autocomplete:"off",onClick:t[0]||(t[0]=(...d)=>l.activateOldGuide&&l.activateOldGuide(...d)),checked:""},null,8,j),i("label",{class:"btn btn-outline",for:`guideOption${e.index}1`},"Utiliser une fiche pre-existante",8,B),i("input",{type:"radio",class:"btn-check",name:`guideOption${e.index}`,id:`guideOption${e.index}2`,autocomplete:"off",onClick:t[1]||(t[1]=(...d)=>l.activateNewGuide&&l.activateNewGuide(...d))},null,8,E),i("label",{class:"btn btn-outline",for:`guideOption${e.index}2`},"Créer une nouvelle fiche pratique",8,z)]),s.oldGuide?(a(),o("div",D,[i("label",{for:`chosenGuideName${e.index}`,class:"form-label required col-12"},"Nom de la fiche",8,S),e.guide.url?(a(),o("div",F,[u(i("input",{id:`guideName${e.index}`,"onUpdate:modelValue":t[4]||(t[4]=d=>e.guide.name=d),class:"form-control",disabled:!s.updateGuide},null,8,J),[[r,e.guide.name]]),i("button",R,[s.updateGuide?(a(),o("i",{key:0,class:"bi bi-save",style:{color:"white"},onClick:t[5]||(t[5]=d=>(l.disableTooltip("saveGuide"+e.index),s.updateGuide=!1,n.$emit("updateGuidesList"))),id:"saveGuide"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Enregistrer cette fiche pratique",onMouseover:t[6]||(t[6]=d=>l.enableTooltip(`saveGuide${e.index}`))},null,40,H)):(a(),o("span",{key:1,"data-bs-toggle":"modal","data-bs-target":"#warningModalGuide"+e.index},[i("i",{class:"bi bi-pencil-square",style:{color:"white"},onClick:t[7]||(t[7]=d=>(l.disableTooltip("updateGuide"+e.index),s.updateGuide=!0,l.setUpdateGuide())),id:"updateGuide"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Modifier cette fiche pratique",onMouseover:t[8]||(t[8]=d=>l.enableTooltip(`updateGuide${e.index}`))},null,40,P)],8,K))])])):u((a(),o("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=d=>s.chosenGuideName=d),id:`chosenGuideName${e.index}`,name:`guideName${e.index}`,class:g(["form-select",{"is-invalid":c.v$.guide.name.$error}]),onChange:t[3]||(t[3]=(...d)=>l.updateGuideInfo&&l.updateGuideInfo(...d))},[(a(!0),o(G,null,C(e.availableGuides,(d,y)=>(a(),o("option",{key:y},x(d.name),1))),128))],42,A)),[[U,s.chosenGuideName]]),i("div",Q,[i("div",W,[i("div",X,[i("label",{for:`guideUrl${e.index}`},"Lien vers la fiche",8,Y),u(i("input",{name:`guideUrl${e.index}`,id:`guideUrl${e.index}`,"onUpdate:modelValue":t[9]||(t[9]=d=>e.guide.url=d),type:"text",maxlength:"255",class:"form-control",disabled:""},null,8,Z),[[r,e.guide.url]])]),i("div",$,[i("label",{for:`guideImage${e.index}`},"Lien vers l'image d'illustration",8,ee),u(i("input",{class:"form-control",type:"text",id:`guideImage${e.index}`,"onUpdate:modelValue":t[10]||(t[10]=d=>e.guide.image=d),disabled:!s.updateGuide},null,8,te),[[r,e.guide.image]])])])])])):(a(),o("div",ie,[i("label",{for:`guideName${e.index}`,class:"fs-6"},"Nom de la fiche",8,de),u(i("input",{name:`guideName${e.index}`,id:`guideName${e.index}`,"onUpdate:modelValue":t[11]||(t[11]=d=>e.guide.name=d),type:"text",maxlength:"100",class:g(["form-control mb-2",{"is-invalid":c.v$.guide.name.$error}])},null,10,le),[[r,e.guide.name]]),c.v$.guide.name.$error?(a(),o("p",ne,"Ce champs est obligatoire et doit contenir entre 3 et 100 caractères")):b("",!0),i("div",ae,[i("div",oe,[i("div",se,[i("label",{for:`guideUrl${e.index}`},"Lien vers la fiche",8,ue),u(i("input",{name:`guideUrl${e.index}`,id:`guideUrl${e.index}`,"onUpdate:modelValue":t[12]||(t[12]=d=>e.guide.url=d),type:"text",maxlength:"255",class:g(["form-control",{"is-invalid":c.v$.guide.url.$error}])},null,10,re),[[r,e.guide.url]]),c.v$.guide.url.$error?(a(),o("p",ce,"L'url est obligatoire et doit corresondre au site majrh.fr")):b("",!0)]),i("div",me,[i("label",{for:`guideImage${e.index}`},"Lien vers l'image d'illustration",8,ge),u(i("input",{class:"form-control",type:"text",id:`guideImage${e.index}`,"onUpdate:modelValue":t[13]||(t[13]=d=>e.guide.image=d),required:""},null,8,be),[[r,e.guide.image]])])])])])),i("div",he,[s.oldGuide?(a(),o("i",{key:0,class:"bi bi-arrow-left-right primary clickable-icon",style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onClick:t[14]||(t[14]=d=>l.resetGuide()),id:"change"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Choisir une autre fiche pratique",onMouseover:t[15]||(t[15]=d=>l.enableTooltip(`change${e.index}`))},null,40,fe)):b("",!0),i("i",{class:"bi bi-trash3-fill primary clickable-icon",style:{"font-size":"1.5rem",color:"var(--second-dark-color)"},onClick:t[16]||(t[16]=d=>n.$emit("deleteGuide",e.index)),id:"delete"+e.index,"data-bs-toggle":"tooltip","data-bs-custom-class":"bg-tooltip","data-bs-original-title":"Retirer cette fiche pratique",onMouseover:t[17]||(t[17]=d=>l.enableTooltip(`delete${e.index}`))},null,40,ve)])],64)}const ye=N(q,[["render",_e]]);export{ye as G};
